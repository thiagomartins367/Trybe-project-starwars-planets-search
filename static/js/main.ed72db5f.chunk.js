(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{10:function(e,t,a){e.exports=a(17)},15:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(7),c=a.n(l),o=(a(15),a(9)),i=a(1),u=Object(n.createContext)(),s=function(e){var t=e.filters,a=e.filtersDataTestIds,n=e.classNameFilter,l=e.setIdFilterToBeDeleted;return r.a.createElement("section",{className:"section-active-filters"},t.map((function(e,c){var o=e.id,i=e.columnFilter,u=e.comparisonFilter,s=e.valueFilter,m="".concat(i," ").concat(u," ").concat(s);return r.a.createElement("div",{key:"".concat(m,"-").concat(o),className:n.length===t.length?n[c]:n[0],"data-testid":a.length===t.length?a[c]:a[0]},r.a.createElement("span",null,m),r.a.createElement("button",{type:"button",onClick:function(){return l(o)}},"x"))})))};s.defaultProps={filtersDataTestIds:[],classNameFilter:[]};var m=s,d=function(e){var t=e.labelContent,a=e.inputType,n=e.inputId,l=e.inputValue,c=e.onChangeEvent,o=e.classNameComponent,i=e.dataTestId;return r.a.createElement("div",{className:o},r.a.createElement("label",{htmlFor:n},t),r.a.createElement("br",null),r.a.createElement("input",{type:a,id:n,value:l,onChange:c,"data-testid":i}))};d.defaultProps={onChangeEvent:function(){return""},classNameComponent:"",dataTestId:""};var f=d,p=function(e){var t=e.nameInputs,a=e.inputsContents,n=e.onClickEvent,l=e.inputsDataTestIds;return r.a.createElement("div",null,r.a.createElement("label",{htmlFor:t},a.map((function(e,a){return r.a.createElement("div",{key:e},r.a.createElement("input",{type:"radio",name:t,value:e,onClick:n,"data-testid":l[a]}),e,r.a.createElement("br",null))}))))};p.defaultProps={onClickEvent:function(){return""},inputsDataTestIds:[]};var b=p,E=function(e){var t=e.labelContent,a=e.selectId,n=e.onChangeEvent,l=e.optionsContent,c=e.classNameComponent,o=e.selectDataTestId;return r.a.createElement("div",{className:c},r.a.createElement("label",{htmlFor:a},t),r.a.createElement("br",null),r.a.createElement("select",{id:a,onChange:n,"data-testid":o},l.map((function(e){return r.a.createElement("option",{key:e},e)}))))};E.defaultProps={onChangeEvent:function(){return""},classNameComponent:"",selectDataTestId:""};var O=E,v=function(){var e=Object(n.useContext)(u),t=e.filteredPlanets,a=e.setFilterByName,l=e.columnFilterOptions,c=e.optionsForFilters,s=c.editableColumnFilterOptions,d=c.comparisonFilterOptions,p=e.setFilterByNumericValues,E=e.stateFilterByNumericValue,v=E.createdFilter,j=E.filterByNumericValues,F=e.stateFilterByName.filterByName,h=e.setIdFilterToBeDeleted,C=e.setTableSort,N=!1;return r.a.createElement("section",null,r.a.createElement("section",{className:"section-filters"},r.a.createElement(f,{labelContent:"Nome Planeta",inputType:"text",inputId:"name-filter",inputValue:F.name,classNameComponent:"component-name-filter",onChangeEvent:function(e){var t=e.target.value;a((function(e){return Object(i.a)(Object(i.a)({},e),{},{filterByName:{name:t.toLowerCase()}})}))},dataTestId:"name-filter"}),r.a.createElement(O,{labelContent:"Coluna",selectId:"column-filter",classNameComponent:"component-column-filter",onChangeEvent:function(e){var t=e.target.value;p((function(e){return Object(i.a)(Object(i.a)({},e),{},{createdFilter:Object(i.a)(Object(i.a)({},e.createdFilter),{},{columnFilter:t})})}))},optionsContent:s,selectDataTestId:"column-filter"}),r.a.createElement(O,{labelContent:"Operador",selectId:"comparison-filter",classNameComponent:"component-comparison-filter",onChangeEvent:function(e){var t=e.target.value;p((function(e){return Object(i.a)(Object(i.a)({},e),{},{createdFilter:Object(i.a)(Object(i.a)({},e.createdFilter),{},{comparisonFilter:t})})}))},optionsContent:d,selectDataTestId:"comparison-filter"}),r.a.createElement(f,{labelContent:"Valor para o Operador",inputType:"number",inputId:"value-filter",inputValue:v.valueFilter,classNameComponent:"component-value-filter",onChangeEvent:function(e){var t=e.target.value;p((function(e){return Object(i.a)(Object(i.a)({},e),{},{createdFilter:Object(i.a)(Object(i.a)({},e.createdFilter),{},{valueFilter:Number(t)})})}))},dataTestId:"value-filter"}),r.a.createElement("button",{type:"button",onClick:function(){p((function(e){return Object(i.a)(Object(i.a)({},e),{},{createdFilter:Object(i.a)(Object(i.a)({},e.createdFilter),{},{id:e.createdFilter.id+1})})})),p((function(e){return Object(i.a)(Object(i.a)({},e),{},{filterByNumericValues:[].concat(Object(o.a)(e.filterByNumericValues),[Object(i.a)(Object(i.a)({},v),{},{id:v.id+1})])})}))},"data-testid":"button-filter"},"Filtrar")),r.a.createElement("br",null),r.a.createElement("section",null,r.a.createElement(O,{labelContent:"Ordenar por: ",selectId:"column-sort",onChangeEvent:function(e){var t=e.target.value;C((function(e){return Object(i.a)(Object(i.a)({},e),{},{order:Object(i.a)(Object(i.a)({},e.order),{},{column:t})})}))},optionsContent:l,selectDataTestId:"column-sort"}),r.a.createElement("br",null),r.a.createElement(b,{nameInputs:"nameInput",inputsContents:["Ascendente","Descendente"],onClickEvent:function(e){var t=e.target.value;C((function(e){return Object(i.a)(Object(i.a)({},e),{},{order:Object(i.a)(Object(i.a)({},e.order),{},{sort:"Ascendente"===t?"ASC":"DESC"})})}))},inputsDataTestIds:["column-sort-input-asc","column-sort-input-desc"]}),r.a.createElement("button",{type:"button",onClick:function(){C((function(e){return Object(i.a)(Object(i.a)({},e),{},{activeSorting:!0})}))},"data-testid":"column-sort-button"},"ORDENAR")),r.a.createElement("br",null),r.a.createElement(m,{filters:j,filtersDataTestIds:["filter"],classNameFilter:["filter"],setIdFilterToBeDeleted:h}),r.a.createElement("br",null),r.a.createElement("button",{type:"button",onClick:function(){p((function(e){return Object(i.a)(Object(i.a)({},e),{},{filterByNumericValues:[]})}))},"data-testid":"button-remove-filters"},"REMOVER FILTROS"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Rotation Period"),r.a.createElement("th",null,"Orbital Period"),r.a.createElement("th",null,"Diameter"),r.a.createElement("th",null,"Climate"),r.a.createElement("th",null,"Gravity"),r.a.createElement("th",null,"Terrain"),r.a.createElement("th",null,"Surface Water"),r.a.createElement("th",null,"Population"),r.a.createElement("th",null,"Films"),r.a.createElement("th",null,"Created"),r.a.createElement("th",null,"Edited"),r.a.createElement("th",null,"URL"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.name,style:{backgroundColor:(N=!N)?"rgb(192, 192, 192)":"wite"}},r.a.createElement("td",{className:"td","data-testid":"planet-name"},e.name),r.a.createElement("td",{className:"td"},e.rotation_period),r.a.createElement("td",{className:"td"},e.orbital_period),r.a.createElement("td",{className:"td"},e.diameter),r.a.createElement("td",{className:"td"},e.climate),r.a.createElement("td",{className:"td"},e.gravity),r.a.createElement("td",{className:"td"},e.terrain),r.a.createElement("td",{className:"td"},e.surface_water),r.a.createElement("td",{className:"td"},e.population),r.a.createElement("td",{className:"td-films"},e.films.map((function(e){return r.a.createElement("span",{key:e},r.a.createElement("a",{href:e},e))}))),r.a.createElement("td",{className:"td"},e.created),r.a.createElement("td",{className:"td"},e.edited),r.a.createElement("td",{className:"td-planetUrl"},r.a.createElement("a",{href:e.url},e.url)))})))))},j=a(2),F=a(5),h=a.n(F),C=a(8),N=function(){var e=Object(C.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.log("API REQUEST ERROR: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),y=function(e){var t=e.children,a=Object(n.useState)([]),l=Object(j.a)(a,2),c=l[0],o=l[1],s=Object(n.useState)([]),m=Object(j.a)(s,2),d=m[0],f=m[1],p=Object(n.useState)(["population","orbital_period","diameter","rotation_period","surface_water"]),b=Object(j.a)(p,2),E=b[0],O=b[1],v=Object(n.useState)({editableColumnFilterOptions:["population","orbital_period","diameter","rotation_period","surface_water"],comparisonFilterOptions:["maior que","menor que","igual a"]}),F=Object(j.a)(v,2),h=F[0],C=F[1],y=Object(n.useState)({filterByName:{name:""}}),g=Object(j.a)(y,2),I=g[0],T=g[1],k=Object(n.useState)({createdFilter:{id:0,columnFilter:"population",comparisonFilter:"maior que",valueFilter:0},filterByNumericValues:[]}),B=Object(j.a)(k,2),S=B[0],D=B[1],w=Object(n.useState)(0),V=Object(j.a)(w,2),P=V[0],x=V[1],A=Object(n.useState)({activeSorting:!1,order:{column:"population",sort:"ASC"}}),R=Object(j.a)(A,2),_=R[0],q=R[1];Object(n.useEffect)((function(){N("https://swapi.dev/api/planets/").then((function(e){var t=e.results.concat();t.sort((function(e,t){return e.name.localeCompare(t.name)})),o(t),f(t)}))}),[]),Object(n.useEffect)((function(){var e=I.filterByName;if(""!==e.name){var t=c.filter((function(t){return t.name.toLowerCase().includes(e.name)}));f(t)}else f(c)}),[I,c]),Object(n.useEffect)((function(){var e=S.filterByNumericValues;if(e.length>0){var t=c,a=E.concat();e.forEach((function(e){var n=e.columnFilter,r=e.comparisonFilter,l=e.valueFilter;switch(r){case"maior que":t=t.filter((function(e){return e[n]>l}));break;case"menor que":t=t.filter((function(e){return e[n]<l}));break;case"igual a":t=t.filter((function(e){return Number(e[n])===l}))}a=a.filter((function(e){return e!==n}))})),C((function(e){return Object(i.a)(Object(i.a)({},e),{},{editableColumnFilterOptions:a})})),f(t)}else f(c),C((function(e){return Object(i.a)(Object(i.a)({},e),{},{editableColumnFilterOptions:E})}));0!==P&&(D((function(t){return Object(i.a)(Object(i.a)({},t),{},{filterByNumericValues:e.filter((function(e){return e.id!==P}))})})),x(0))}),[S,c,P,E]);Object(n.useEffect)((function(){var e=_.activeSorting,t=_.order,a=t.column,n=t.sort;if(e){var r=d.concat(),l=[];r.forEach((function(e){"unknown"!==e[a]&&l.push(Number(e[a]))}));var c=Math.max.apply(Math,l)+1,o=Math.min.apply(Math,l)-1;r=function(e){var t=e.sortByTableColumn,a=e.column,n=e.sort,r=e.highestValueInArray,l=e.smallestValueInArray;switch(n){case"ASC":t.sort((function(e,t){return("unknown"!==e[a]?e[a]:r)-("unknown"!==t[a]?t[a]:r)}));break;case"DESC":t.sort((function(e,t){var n="unknown"!==e[a]?e[a]:l;return("unknown"!==t[a]?t[a]:l)-n}))}return t}({sortByTableColumn:r,column:a,sort:n,highestValueInArray:c,smallestValueInArray:o}),f(r),q((function(e){return Object(i.a)(Object(i.a)({},e),{},{activeSorting:!1})}))}}),[_,d]);var M={data:c,setPlanets:o,filteredPlanets:d,setFilteredPlanets:f,stateFilterByName:I,setFilterByName:T,columnFilterOptions:E,setcolumnFilterOptions:O,optionsForFilters:h,setOptionsForFilters:C,stateFilterByNumericValue:S,setFilterByNumericValues:D,idFilterToBeDeleted:P,setIdFilterToBeDeleted:x,tableSort:_,setTableSort:q};return r.a.createElement(u.Provider,{value:M},t)};y.defaultProps={children:r.a.createElement(r.a.Fragment,null,"default")};var g=y;var I=function(){return r.a.createElement(g,null,r.a.createElement(v,null))};c.a.render(r.a.createElement(I,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.ed72db5f.chunk.js.map